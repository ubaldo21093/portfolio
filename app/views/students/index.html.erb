<p style="color: green" role="alert"><%= notice %></p>

<h1>Students</h1>
<%= render 'search_form', search_params: @search_params %>

<div id="students" class="container">
  <% if @students.empty? %>
    <div class="text-center" role="alert">
      <% if @search_params.empty? %>
        <p>Search for students to display</p>
      <% else %>
        <p>No students found</p>
      <% end %>
    </div>
  <% else %>
    <div class="table-responsive">
      <table class="table table-striped table-hover" aria-label="Student List">
        <thead>
          <tr>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Major</th>
            <th scope="col">Graduation Date</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @students.each do |student| %>
            <tr>
              <td><%= student.first_name %></td>
              <td><%= student.last_name %></td>
              <td><%= student.major %></td>
              <td><%= student.graduation_date.strftime('%B %d, %Y') %></td>
              <td class="d-flex gap-2">
                <%= link_to 'Show', student, class: "btn btn-primary btn-sm", aria_label: "Show details for #{student.first_name} #{student.last_name}" %> 
                <%= link_to 'Edit', edit_student_path(student), class: "btn btn-secondary btn-sm", aria_label: "Edit details for #{student.first_name} #{student.last_name}" %> 
                <%= button_to 'Delete', student, method: :delete, class: "btn btn-danger btn-sm", data: { confirm: 'Are you sure?' }, aria_label: "Delete #{student.first_name} #{student.last_name}" %> 
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>

  <%= link_to "Show All", students_path(search: { major: "" }), class: "btn btn-primary mt-3" %>
</div>

<%= link_to "New student", new_student_path, class: "btn btn-success mt-3" %>